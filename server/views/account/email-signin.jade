extends ../layout


block content
    style.
        body {
            background-color: #10161b;
            color: #fff;
            font-family: 'Segoe UI', Arial, sans-serif;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }
        
        .video-container {
            border-radius: 8px;
            overflow: hidden;
            width: 100%;
            height: 360px;
            max-width: 540px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            position: relative;
            background-color: #000;
            margin: 0 auto 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;

        }

        video#redrockMainVideo {
            width: auto;
            height: 100%;
            object-fit: contain;
            max-height: 100%;
            max-width: 100%;
            display: block;

        }

        .video-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }
        .media-col, .form-col {display: flex; flex-direction: column; align-items: center; justify-content: center;}
        .video-section {display: flex; flex-direction: column; align-items: center;}
        
        .form-panel {display: flex; flex-direction: column; align-items: center;}
        .form-control {text-align: center; width: 270px; background-color: #10161b; border-color: #444; color: #fff; border-radius: 4px; height: 36px;}
        .form-control:hover { cursor: pointer; color: #fff; border-color: #2563eb; }
        
        .auth-form label {color: #ccc; font-size: 10px; font-weight: 500; letter-spacing: 0.5px; margin-bottom: 5px;}
        
        #magic-btn {background-color: #2563eb; border: none; border-radius: 4px; padding: 0px 8px; width: 260px;}
        
        .alt-signup {text-align: center; margin-top: 20px; font-size: 12px;}
        .alt-signup a {color: #2563eb;}
        
        .inline-link {color: #2563eb; display: block; text-align: center; margin-top: 10px; font-size: 12px;}
        .inline-link.active {
            background-color: #1a365d;
            border-color: #2563eb;
            color: white;
        }
    .container(style='padding-top:28px; min-height:calc(100vh - 160px); background-color: #10161b; color: #fff; width: 100%; height: 100%;')

        if flashMessage
            .row
                .col-sm-8.col-sm-offset-2.auth-flash
                    #flash-board.alert.alert-success.fade.in()
                        button.close(type='button', data-dismiss='alert')
                            span.ion-close-circled#flash-close
                        #flash-content #{flashMessage}


        .row

            .col-md-6.col-sm-12.form-col
                .video-section
                    .video-container
                        video#redrockMainVideo(autoplay loop muted playsinline controls)
                            source(src='/assets/videos/midjourney_redrockcode_spinning_mountain_range.mp4', type='video/mp4')
                            | Your browser does not support the video tag.
                a.form-control.inline-link(data-video='/assets/videos/redrockcode_intro_1.mp4' href='javascript:void(0)')  2 minutes: Introduction to Redrock Code
                a.form-control.inline-link(data-video='/assets/videos/redrockcode_intro_2.mp4' href='javascript:void(0)') 14 minutes: What will I learn?
                span.small(style='color:#666; margin-top:8px;') * Click links for a preview with project samples! *
                a.span.small(style='color:#666; margin-top:8px;' target='_blank' href='https://silvermedal.online') * Click here to view a 3D game demo made with CodeCamp technology *
            .col-md-6.col-sm-12.form-col
                .form-panel
                    form.auth-form(method='POST', action='/signin')
                        input(type='hidden', name='_csrf', value=_csrf)
                        .form-group(style='padding-top:16px;')
                            label(for='email') Email
                            input.form-control(type='email', name='email', id='email', value='#{email ? email : ""}', placeholder='you@example.com', autofocus=true, required)
                        .form-group
                            label(for='password') Password
                            input.form-control(type='password', name='password', id='password', placeholder='••••••••', required)
                        button#magic-btn.btn.btn-primary.btn-block(type='submit') Sign In
                
                        .alt-signup
                            if !settings.isSignUpDisabled

                                span New here?
                                a(href='/create-account')   Sign up!

    script.
        document.addEventListener('DOMContentLoaded', function() {
            const videoLinks = document.querySelectorAll('.inline-link');
            const videoPlayer = document.getElementById('redrockMainVideo');
            
            videoLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    videoLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    videoPlayer.pause();
                    videoPlayer.currentTime = 0;

                    const videoSrc = this.getAttribute('data-video');
                    videoPlayer.querySelector('source').src = videoSrc;
                    videoPlayer.load();

                    videoPlayer.oncanplay = () => {
                        videoPlayer.muted = false;
                        videoPlayer.play();
                        videoPlayer.oncanplay = null;
                    };
                });
            });
        });

